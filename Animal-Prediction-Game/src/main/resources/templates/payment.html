<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Razorpay Payment Form</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h3 class="text-center">Razorpay Payment Form</h3>
                </div>
                <div class="card-body">
                    <!-- Payment Form -->
                    <form id="razorpay-form">
                        <div class="form-group">
                            <label for="amount">Amount (INR)</label>
                            <input type="number" class="form-control" id="amount" name="amount" placeholder="Enter amount" required>
                        </div>
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="Enter your name" required>
                        </div>
                        <div class="form-group">
                            <label for="mob">Mobile No</label>
                            <input type="text" class="form-control" id="mob" name="mob" placeholder="Enter your mobile no" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
                        </div>
                        <button type="button" class="btn btn-primary btn-block" onclick="initiatePayment()">Pay with Razorpay</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Include Razorpay JavaScript -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<!-- Your custom JavaScript -->
<script>


function initiatePayment() {
    // Fetch the values from the form
    var amountInRupees = document.getElementById('amount').value;
    var name = document.getElementById('name').value;
    var email = document.getElementById('email').value;
    var mob = document.getElementById('mob').value;

    // Create a new order on the server
    $.ajax({
        url: "/create-razorpay-order",
        method: "POST",
        contentType: "application/json",
        data: JSON.stringify({ amount: amountInRupees }),
        success: function(response) {
            var options = {
                key: 'rzp_test_2a4138qbay7bmn',
                amount: amountInRupees * 100, // Convert to paise
                currency: 'INR',
                name: 'Animal Prediction',
                description: 'Payment for ' + name,
                image: 'https://your-company-logo-url.png',
                order_id: response.order_id,
                handler: function(response) {
                    alert('Payment successful: ' + response.razorpay_payment_id);
                },
                prefill: {
                    name: name,
                    email: email,
                    contact: mob,
                }
            };

            var rzp = new Razorpay(options);
            rzp.open();
        },
        error: function(error) {
            console.error("Error creating Razorpay order:", error);
        }
    });
}




</script>

</body>
</html>
